.addShadow() when not(@config-dark-mode = true) {
  background: #ededed;
  background-image: linear-gradient(to bottom, rgba(128, 128, 128, 0.2) 0, transparent 4px);
}

.addShadow() when (@config-dark-mode = true) {
  background: #212121;
  background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.2) 0, transparent 4px);
}

.flarumite-spoiler {
  display: block;
  width: 100%;
  margin-bottom: 16px;

  // If we have embedded spoilers, add border to make it obvious
  & &.flarumite-spoiler {
    border: #000 1px solid;
  }

  summary {
    cursor: pointer;

    // Remove the little arrow which shows
    list-style: none;

    // Chrome is a pain in the backside and
    // likes making it's own dumb standards
    &::-webkit-details-marker {
      display: none;
    }

    .Button();

    width: 100%;
  }

  &[open] summary {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }

  .flarumite-spoiler--title {
    .flarumite-spoiler--default-text {
      display: none;
    }

    .flarumite-spoiler--custom-text:empty {
      display: none;

      ~ .flarumite-spoiler--default-text {
        display: inline;
      }
    }
  }

  .flarumite-spoiler--title-open {
    display: none;
  }

  // Automatically change between text when expanded/hidden
  &[open] {
    .flarumite-spoiler--title-closed {
      display: none;
    }

    .flarumite-spoiler--title-open {
      display: inline;
    }
  }

  .flarumite-spoiler--content {
    padding: 12px;

    .addShadow();

    // Remove paragarph spacing from last paragraph in spoiler
    p:last-child {
      margin-bottom: 0;
    }
  }
}
